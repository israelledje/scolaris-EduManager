{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}

{% block title %}{{ title }} - Finances{% endblock %}
{% block page_title %}{{ title }}{% endblock %}
{% block breadcrumb_current %}Types de Frais Annexes{% endblock %}

{% block page_actions %}
<div class="flex items-center gap-3">
    <a href="{% url 'finances:extra_fee_type_list' %}" class="bg-slate-100 hover:bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-xl transition-all duration-200">
        <i class="fas fa-arrow-left mr-2"></i>Retour
    </a>
</div>
{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <div class="card-hover bg-white rounded-2xl shadow-sm border border-slate-200/60 overflow-hidden">
        <div class="px-6 py-4 border-b border-slate-200/60">
            <h3 class="text-lg font-semibold text-slate-900">{{ title }}</h3>
        </div>
        
        <form method="post" class="p-6 space-y-6">
            {% csrf_token %}
            
            <!-- Nom -->
            <div>
                <label for="{{ form.name.id_for_label }}" class="block text-sm font-medium text-slate-700 mb-2">
                    Nom du type <span class="text-red-500">*</span>
                </label>
                {% render_field form.name class="w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200" placeholder="Ex: Bus Scolaire, Frais d&#39;examens, Uniformes..." %}
                {% if form.name.errors %}
                    <div class="mt-2 text-sm text-red-600">
                        {% for error in form.name.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            
            <!-- Description -->
            <div>
                <label for="{{ form.description.id_for_label }}" class="block text-sm font-medium text-slate-700 mb-2">
                    Description
                </label>
                {% render_field form.description class="w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200" rows="4" placeholder="Description détaillée du type de frais..." %}
                {% if form.description.errors %}
                    <div class="mt-2 text-sm text-red-600">
                        {% for error in form.description.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
            
            <!-- Statut -->
            <div class="flex items-center">
                <input type="checkbox" id="{{ form.is_active.id_for_label }}" name="{{ form.is_active.name }}" 
                       class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500" 
                       {% if form.is_active.value or not extra_fee_type %}checked{% endif %}>
                <label for="{{ form.is_active.id_for_label }}" class="ml-2 text-sm font-medium text-slate-700">
                    Type actif
                </label>
                <p class="ml-4 text-xs text-slate-500">Un type inactif ne peut pas être utilisé pour créer de nouveaux frais</p>
            </div>
            
            <!-- Boutons d'action -->
            <div class="flex items-center justify-end gap-4 pt-6 border-t border-slate-200">
                <a href="{% url 'finances:extra_fee_type_list' %}" 
                   class="bg-slate-100 hover:bg-slate-200 text-slate-700 font-semibold py-3 px-6 rounded-xl transition-all duration-200">
                    Annuler
                </a>
                <button type="submit" 
                        class="btn-gradient text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 transform hover:scale-105 shadow-lg">
                    <i class="fas fa-save mr-2"></i>
                    {% if extra_fee_type %}Modifier{% else %}Créer{% endif %}
                </button>
            </div>
        </form>
    </div>
    
    <!-- Informations supplémentaires -->
    <div class="mt-6 card-hover bg-blue-50 rounded-2xl border border-blue-200 p-6">
        <div class="flex items-start">
            <div class="flex-shrink-0">
                <i class="fas fa-info-circle text-blue-600 text-xl"></i>
            </div>
            <div class="ml-3">
                <h4 class="text-sm font-medium text-blue-900">Informations importantes</h4>
                <div class="mt-2 text-sm text-blue-700 space-y-1">
                    <p>• Les types de frais permettent de catégoriser les frais annexes</p>
                    <p>• Exemples : Bus Scolaire, Frais d'examens, Uniformes, Activités</p>
                    <p>• Un type inactif ne peut pas être utilisé pour créer de nouveaux frais</p>
                    <p>• La description aide à clarifier le type de frais</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
