{% if documents %}
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for document in documents %}
    <div class="bg-white rounded-2xl shadow-sm border border-slate-200/60 overflow-hidden hover:shadow-lg transition-all duration-300">
        <!-- En-tête du document -->
        <div class="p-6 border-b border-slate-200/60">
            <div class="flex items-center justify-between mb-4">
                <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                    {% if document.file_extension == '.pdf' %}
                        <i class="fas fa-file-pdf text-red-600 text-xl"></i>
                    {% elif document.file_extension in '.doc,.docx' %}
                        <i class="fas fa-file-word text-blue-600 text-xl"></i>
                    {% elif document.file_extension in '.jpg,.jpeg,.png' %}
                        <i class="fas fa-file-image text-green-600 text-xl"></i>
                    {% else %}
                        <i class="fas fa-file text-slate-600 text-xl"></i>
                    {% endif %}
                </div>
                <div class="flex items-center gap-2">
                    {% if document.is_expired %}
                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                            <i class="fas fa-exclamation-triangle mr-1"></i>Expiré
                        </span>
                    {% elif not document.is_valid %}
                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-800">
                            <i class="fas fa-clock mr-1"></i>En attente
                        </span>
                    {% else %}
                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                            <i class="fas fa-check mr-1"></i>Valide
                        </span>
                    {% endif %}
                </div>
            </div>
            
            <h3 class="text-lg font-semibold text-slate-900 mb-2">{{ document.title }}</h3>
            <p class="text-sm text-slate-600 mb-4">{{ document.description|default:"Aucune description" }}</p>
            
            <div class="space-y-2">
                <div class="flex items-center justify-between text-sm">
                    <span class="text-slate-500">Catégorie</span>
                    <span class="font-medium text-slate-900">{{ document.category.name }}</span>
                </div>
                <div class="flex items-center justify-between text-sm">
                    <span class="text-slate-500">Taille</span>
                    <span class="font-medium text-slate-900">{{ document.file_size_mb }} MB</span>
                </div>
                <div class="flex items-center justify-between text-sm">
                    <span class="text-slate-500">Uploadé le</span>
                    <span class="font-medium text-slate-900">{{ document.uploaded_at|date:"d/m/Y" }}</span>
                </div>
                {% if document.expiry_date %}
                <div class="flex items-center justify-between text-sm">
                    <span class="text-slate-500">Expire le</span>
                    <span class="font-medium {% if document.is_expired %}text-red-600{% else %}text-slate-900{% endif %}">
                        {{ document.expiry_date|date:"d/m/Y" }}
                    </span>
                </div>
                {% endif %}
            </div>
        </div>
        
        <!-- Actions -->
        <div class="p-6 bg-slate-50">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-2">
                    <a href="{% url 'documents:document_download' document.pk %}" 
                       class="inline-flex items-center px-3 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors">
                        <i class="fas fa-download mr-2"></i>Télécharger
                    </a>
                    <a href="{% url 'documents:document_update' document.pk %}" 
                       class="inline-flex items-center px-3 py-2 bg-slate-600 text-white text-sm font-medium rounded-lg hover:bg-slate-700 transition-colors">
                        <i class="fas fa-edit mr-2"></i>Modifier
                    </a>
                </div>
                <button onclick="confirmDelete('{{ document.pk }}')" 
                        class="inline-flex items-center px-3 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors">
                    <i class="fas fa-trash mr-2"></i>Supprimer
                </button>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="text-center py-12">
    <div class="w-24 h-24 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-6">
        <i class="fas fa-folder-open text-slate-400 text-3xl"></i>
    </div>
    <h3 class="text-xl font-semibold text-slate-900 mb-2">Aucun document trouvé</h3>
    <p class="text-slate-600 mb-6">Aucun document ne correspond à votre recherche.</p>
    <a href="{% url 'documents:document_create' student.pk %}" 
       class="inline-flex items-center px-6 py-3 bg-blue-600 text-white font-semibold rounded-xl hover:bg-blue-700 transition-colors">
        <i class="fas fa-plus mr-2"></i>Ajouter un document
    </a>
</div>
{% endif %}

<script>
function confirmDelete(documentId) {
    if (confirm('Êtes-vous sûr de vouloir supprimer ce document ?')) {
        window.location.href = `/documents/${documentId}/delete/`;
    }
}
</script> 